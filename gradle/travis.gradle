import org.gradle.api.tasks.testing.logging.*

if (hasProperty("travis")) {
  allprojects {
    tasks.withType(Test) { task ->
      maxParallelForks = 2

      afterSuite { desc, result ->
        if (desc.className) {
          def tc = result.testCount
          logger.lifecycle("Completed: ${desc.className} (${tc} ${tc = 1 ? 'test' : 'tests'})")
        }
      }
    }
  }
}
